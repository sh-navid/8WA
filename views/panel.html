<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>NaBotX</title>
    ${styles} ${scripts}

    <style>
    </style>
  </head>
  <body>
    <div class="tab-buttons">
      <button class="tab-button active" onclick="openTab('tab1')">
        Assistant
      </button>
      <button class="tab-button" onclick="openTab('tab2')">Preview</button>
    </div>

    <div class="container">
      <div id="tab1" class="tab-content tab1">
        <div>
          <div id="logoHolder">
            <img src="${logo4.svg}" alt="NaBotX Logo" width="110rem" />
            <br />
            <h3>Start to code with N8X</h3>
            <span>Type <kbd>/</kbd> to use commands</span>
            <br />
            <br />
            <span>Use <kbd>Ctrl</kbd>+<kbd>Enter</kbd> to send</span>
          </div>
          <div
            id="chatMessages"
            role="log"
            aria-live="polite"
            aria-relevant="additions"
          ></div>
          <div class="space"></div>
          <div class="space"></div>
          <div class="space"></div>
          <div class="space"></div>
        </div>

        <div class="input-wrapper">
          <textarea
            id="userInput"
            placeholder="Type your prompt or use /command"
            autocomplete="off"
            aria-label="Message input"
            autofocus
          ></textarea>

          <div class="input-button-wrapper">
            <img
              width="15rem"
              src="${clear.png}"
              onclick="clearChat()"
              class="icon-btn"
              title="Clear Chat"
            />

            <img
              width="15rem"
              src="${send.png}"
              id="sendButton"
              class="icon-btn"
              title="Send Message to ${model}"
            />
          </div>
        </div>
      </div>

      <div id="tab2" class="tab-content tab2" style="display: none;">
        <iframe src="http://localhost:3000"></iframe>
      </div>
    </div>

    <script>
      const vscode = acquireVsCodeApi();

      const btnOpenCodeFile = "${btn-open-code-file.png}";
      const btnReplace = "${btn-replace.png}";
      const btnAppend = "${btn-append.png}";
      const btnCopy = "${btn-copy.png}";
      const btnDiff = "${btn-diff.png}";
      const btnUndo = "${btn-undo.png}";

      const token = "${token}";
      const model = "${model}";
      const path = "${path}";
      const rules = "${rules}";

      function openTab(tabId) {
        // Hide all tabs
        const tabs = document.querySelectorAll(".tab-content");
        tabs.forEach((tab) => (tab.style.display = "none"));

        // Deactivate all buttons
        const buttons = document.querySelectorAll(".tab-button");
        buttons.forEach((button) => button.classList.remove("active"));

        // Show the selected tab
        document.getElementById(tabId).style.display = "flex"; // or "block" depending on your layout
        // Activate the button
        document
          .querySelector(`.tab-button[onclick="openTab('${tabId}')"]`)
          .classList.add("active");
      }

      // Open the default tab on page load
      document.addEventListener("DOMContentLoaded", () => {
        openTab("tab1");
      });
    </script>
  </body>
</html>
